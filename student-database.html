<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Database - Tendercare School</title>
<link rel="stylesheet" href="tch_system_complete.css">
<style>
/* Additional custom styles for the archive feel */
:root {
  --archive-border: rgba(150, 150, 150, 0.15);
  --archive-bg: rgba(245, 245, 247, 0.95);
}

body {
  background-color: var(--ios-system-background);
  color: var(--ios-label-primary);
}

.archive-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 var(--ios-space-4);
}

.archive-header {
  margin-top: var(--ios-space-6);
  margin-bottom: var(--ios-space-6);
  padding: 0 var(--ios-space-4);
}

.archive-title {
  font-size: 40px;
  font-weight: 800;
  letter-spacing: -0.03em;
  color: var(--ios-label-primary);
  margin-bottom: var(--ios-space-2);
  line-height: 1.1;
}

.archive-subtitle {
  font-size: 17px;
  color: var(--ios-label-secondary);
  font-weight: 400;
  line-height: 1.5;
}

.archive-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: var(--ios-space-3);
  margin: 0 var(--ios-space-4) var(--ios-space-6);
}

.archive-stat-card {
  background-color: var(--ios-secondary-background);
  border-radius: var(--ios-radius-medium);
  padding: var(--ios-space-5);
  border: 0.5px solid var(--archive-border);
  box-shadow: var(--ios-shadow-subtle);
}

.archive-stat-value {
  font-size: 32px;
  font-weight: 700;
  color: var(--ios-label-primary);
  margin-bottom: var(--ios-space-1);
  line-height: 1;
}

.archive-stat-label {
  font-size: 14px;
  color: var(--ios-label-tertiary);
  font-weight: 500;
  letter-spacing: 0.02em;
}

.archive-controls {
  display: flex;
  gap: var(--ios-space-3);
  margin: 0 var(--ios-space-4) var(--ios-space-5);
  flex-wrap: wrap;
  align-items: center;
}

.archive-search-container {
  flex: 1;
  min-width: 280px;
}

.archive-search-input {
  width: 100%;
  padding: var(--ios-space-4);
  font-size: 17px;
  background-color: var(--ios-secondary-background);
  border: 1px solid var(--ios-separator-opaque);
  border-radius: var(--ios-radius-medium);
  color: var(--ios-label-primary);
  transition: all var(--ios-duration-normal) var(--ios-timing-smooth);
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23999999' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'%3E%3C/circle%3E%3Cpath d='m21 21-4.35-4.35'%3E%3C/path%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right var(--ios-space-4) center;
  background-size: 20px;
  padding-right: var(--ios-space-8);
}

.archive-search-input:focus {
  outline: none;
  border-color: var(--ios-tint-primary);
  box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.1);
}

.archive-filter-group {
  display: flex;
  gap: var(--ios-space-2);
  flex-wrap: wrap;
}

.archive-filter-btn {
  padding: var(--ios-space-3) var(--ios-space-4);
  background-color: var(--ios-tertiary-background);
  border: 0.5px solid var(--archive-border);
  border-radius: var(--ios-radius-full);
  font-size: 15px;
  color: var(--ios-label-secondary);
  cursor: pointer;
  transition: all var(--ios-duration-fast) var(--ios-timing-smooth);
  font-weight: 500;
}

.archive-filter-btn:hover {
  background-color: var(--ios-secondary-background);
  transform: translateY(-1px);
}

.archive-filter-btn.active {
  background-color: var(--ios-tint-primary);
  color: white;
  border-color: var(--ios-tint-primary);
}

.archive-export-btn {
  padding: var(--ios-space-3) var(--ios-space-5);
  background-color: var(--ios-success);
  border: none;
  border-radius: var(--ios-radius-full);
  font-size: 15px;
  color: white;
  cursor: pointer;
  transition: all var(--ios-duration-normal) var(--ios-timing-smooth);
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: var(--ios-space-2);
  white-space: nowrap;
}

.archive-export-btn:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

.archive-table-container {
  background-color: var(--ios-secondary-background);
  border-radius: var(--ios-radius-large);
  margin: 0 var(--ios-space-4) var(--ios-space-8);
  overflow: hidden;
  box-shadow: var(--ios-shadow-subtle);
  border: 0.5px solid var(--archive-border);
  overflow-x: auto;
}

.archive-table {
  width: 100%;
  border-collapse: collapse;
  min-width: 600px;
}

.archive-table-header {
  background-color: var(--ios-tertiary-background);
  border-bottom: 0.5px solid var(--ios-separator-non-opaque);
}

.archive-table th {
  padding: var(--ios-space-4) var(--ios-space-5);
  text-align: left;
  font-size: 13px;
  font-weight: 500;
  color: var(--ios-label-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.03em;
  white-space: nowrap;
  cursor: pointer;
  user-select: none;
  transition: background-color var(--ios-duration-fast) var(--ios-timing-smooth);
}

.archive-table th:hover {
  background-color: rgba(0, 0, 0, 0.02);
}

.archive-table th.sorted {
  color: var(--ios-label-secondary);
}

.archive-table th svg {
  display: inline-block;
  vertical-align: middle;
  margin-left: var(--ios-space-1);
  opacity: 0.5;
  transition: var(--ios-duration-fast) var(--ios-timing-smooth);
}

.archive-table th.sorted svg {
  opacity: 1;
}

.archive-table td {
  padding: var(--ios-space-4) var(--ios-space-5);
  border-bottom: 0.5px solid var(--ios-separator-non-opaque);
  font-size: 17px;
  color: var(--ios-label-primary);
}

.archive-table tbody tr {
  transition: background-color var(--ios-duration-fast) var(--ios-timing-smooth);
}

.archive-table tbody tr:hover {
  background-color: var(--ios-tertiary-background);
}

.archive-table tbody tr:last-child td {
  border-bottom: none;
}

.archive-badge {
  display: inline-block;
  padding: 4px 10px;
  border-radius: var(--ios-radius-full);
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 0.02em;
}

.badge-science {
  background-color: rgba(0, 122, 255, 0.1);
  color: var(--ios-tint-primary);
}

.badge-humanities {
  background-color: rgba(88, 86, 214, 0.1);
  color: var(--ios-tint-secondary);
}

.badge-jss3a {
  background-color: rgba(52, 199, 89, 0.1);
  color: var(--ios-success);
}

.badge-jss3b {
  background-color: rgba(255, 149, 0, 0.1);
  color: var(--ios-warning);
}

.archive-role {
  font-size: 15px;
  color: var(--ios-label-secondary);
  font-weight: 500;
}

.archive-role.leadership {
  color: var(--ios-tint-primary);
  font-weight: 600;
}

@media (max-width: 768px) {
  .archive-title {
    font-size: 32px;
  }
  
  .archive-stats {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .archive-stat-value {
    font-size: 28px;
  }
  
  .archive-controls {
    flex-direction: column;
    align-items: stretch;
  }
  
  .archive-search-container,
  .archive-filter-group {
    width: 100%;
  }
  
  .archive-filter-group {
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .archive-stats {
    grid-template-columns: 1fr;
  }
  
  .archive-table {
    font-size: 15px;
  }
  
  .archive-table th,
  .archive-table td {
    padding: var(--ios-space-3) var(--ios-space-4);
  }
}
</style>
</head>
<body>
<!-- iOS Navigation -->
<nav class="ios-nav-large">
  <div class="ios-nav-large-title">Student Database</div>
  <div class="ios-nav-subtitle">Tendercare School â€¢ Academic Year 2025/26</div>
</nav>

<div class="archive-container">
  <!-- Archive Header -->
  <div class="archive-header">
    <h1 class="archive-title">Student Records Archive</h1>
    <p class="archive-subtitle">Official registry of all enrolled students with detailed academic profiles</p>
  </div>

  <!-- Statistics Cards -->
  <div class="archive-stats">
    <div class="archive-stat-card">
      <div class="archive-stat-value" id="totalStudents">0</div>
      <div class="archive-stat-label">Total Students</div>
    </div>
    <div class="archive-stat-card">
      <div class="archive-stat-value" id="ss3Count">0</div>
      <div class="archive-stat-label">SS3 Students</div>
    </div>
    <div class="archive-stat-card">
      <div class="archive-stat-value" id="jss3Count">0</div>
      <div class="archive-stat-label">JSS3 Students</div>
    </div>
    <div class="archive-stat-card">
      <div class="archive-stat-value" id="leadershipCount">0</div>
      <div class="archive-stat-label">Leadership Roles</div>
    </div>
  </div>

  <!-- Controls -->
  <div class="archive-controls">
    <div class="archive-search-container">
      <input type="text" 
             class="archive-search-input" 
             id="searchInput" 
             placeholder="Search students by name or ID...">
    </div>
    
    <div class="archive-filter-group">
      <button class="archive-filter-btn active" onclick="filterClass('all')">All Students</button>
      <button class="archive-filter-btn" onclick="filterClass('SS3 Science')">SS3 Science</button>
      <button class="archive-filter-btn" onclick="filterClass('SS3 Humanities & Business')">SS3 Humanities & Business</button>
      <button class="archive-filter-btn" onclick="filterClass('JSS3 A')">JSS3 A</button>
      <button class="archive-filter-btn" onclick="filterClass('JSS3 B')">JSS3 B</button>
    </div>
    
    <button class="archive-export-btn" onclick="exportToCSV()">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="7 10 12 15 17 10"></polyline>
        <line x1="12" y1="15" x2="12" y2="3"></line>
      </svg>
      Export Archive
    </button>
  </div>

  <!-- Student Table -->
  <div class="archive-table-container">
    <table class="archive-table" id="studentTable">
      <thead class="archive-table-header">
        <tr>
          <th onclick="sortTable(0)">
            Student Name
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M7 10l5-5 5 5M7 14l5 5 5-5"></path>
            </svg>
          </th>
          <th onclick="sortTable(1)">
            Student ID
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M7 10l5-5 5 5M7 14l5 5 5-5"></path>
            </svg>
          </th>
          <th onclick="sortTable(2)">
            Class
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M7 10l5-5 5 5M7 14l5 5 5-5"></path>
            </svg>
          </th>
          <th onclick="sortTable(3)">
            Role
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M7 10l5-5 5 5M7 14l5 5 5-5"></path>
            </svg>
          </th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>
</div>

<script>
// CORRECTED Student data based on your provided lists
const allStudents = [
  // SS3 Science (22 students - from original file)
  { name: "Angel", id: "TCH020", class: "SS3 Science", role: "-" },
  { name: "Bamise", id: "TCH014", class: "SS3 Science", role: "-" },
  { name: "Bright", id: "TCH002", class: "SS3 Science", role: "Head Girl" },
  { name: "Dorcas", id: "TCH016", class: "SS3 Science", role: "-" },
  { name: "Enoch", id: "TCH012", class: "SS3 Science", role: "-" },
  { name: "Famous", id: "TCH004", class: "SS3 Science", role: "-" },
  { name: "Fauziyyah", id: "TCH007", class: "SS3 Science", role: "-" },
  { name: "Fawaz", id: "TCH021", class: "SS3 Science", role: "-" },
  { name: "Fiyin", id: "TCH011", class: "SS3 Science", role: "-" },
  { name: "Habitat", id: "TCH022", class: "SS3 Science", role: "-" },
  { name: "Kaosara", id: "TCH010", class: "SS3 Science", role: "-" },
  { name: "Khadija", id: "TCH015", class: "SS3 Science", role: "-" },
  { name: "Mercy", id: "TCH008", class: "SS3 Science", role: "-" },
  { name: "Michael", id: "TCH006", class: "SS3 Science", role: "-" },
  { name: "Moyin", id: "TCH017", class: "SS3 Science", role: "-" },
  { name: "Prosper", id: "TCH003", class: "SS3 Science", role: "-" },
  { name: "Rita", id: "TCH019", class: "SS3 Science", role: "-" },
  { name: "Rokibat", id: "TCH018", class: "SS3 Science", role: "-" },
  { name: "Samuel", id: "TCH005", class: "SS3 Science", role: "-" },
  { name: "Taiwo", id: "TCH013", class: "SS3 Science", role: "-" },
  { name: "Temi", id: "TCH001", class: "SS3 Science", role: "Head Boy" },
  { name: "Zainab", id: "TCH009", class: "SS3 Science", role: "-" },
  
  // SS3 Humanities & Business (20 students - from your provided list)
  { name: "Abuh God's power", id: "TCH-H001", class: "SS3 Humanities & Business", role: "-" },
  { name: "Abdul Razak kehinde", id: "TCH-H002", class: "SS3 Humanities & Business", role: "-" },
  { name: "Abdul Majeed Quadri", id: "TCH-H003", class: "SS3 Humanities & Business", role: "-" },
  { name: "Adebayo David", id: "TCH-H004", class: "SS3 Humanities & Business", role: "-" },
  { name: "Adesanya Emmanuel", id: "TCH-H005", class: "SS3 Humanities & Business", role: "-" },
  { name: "Adeniran Moses", id: "TCH-H006", class: "SS3 Humanities & Business", role: "-" },
  { name: "Adisa Fathia", id: "TCH-H007", class: "SS3 Humanities & Business", role: "-" },
  { name: "Ajibola Roheemot", id: "TCH-H008", class: "SS3 Humanities & Business", role: "-" },
  { name: "Amos wisdom", id: "TCH-H009", class: "SS3 Humanities & Business", role: "-" },
  { name: "Enemali ojotoeba", id: "TCH-H010", class: "SS3 Humanities & Business", role: "-" },
  { name: "Folorunsho Petra", id: "TCH-H011", class: "SS3 Humanities & Business", role: "-" },
  { name: "Falope darasimi", id: "TCH-H012", class: "SS3 Humanities & Business", role: "-" },
  { name: "Famakinwa akorede", id: "TCH-H013", class: "SS3 Humanities & Business", role: "-" },
  { name: "Muritala rashidat", id: "TCH-H014", class: "SS3 Humanities & Business", role: "-" },
  { name: "Olalere aishat", id: "TCH-H015", class: "SS3 Humanities & Business", role: "-" },
  { name: "Oyakan Emmanuel", id: "TCH-H016", class: "SS3 Humanities & Business", role: "-" },
  { name: "Sowole Azeem", id: "TCH-H017", class: "SS3 Humanities & Business", role: "-" },
  { name: "Tujiki David", id: "TCH-H018", class: "SS3 Humanities & Business", role: "-" },
  { name: "Yakubu happiness", id: "TCH-H019", class: "SS3 Humanities & Business", role: "-" },
  { name: "Asiemor Divine", id: "TCH-H020", class: "SS3 Humanities & Business", role: "-" },
  
  // JSS3 A (36 students - from your provided list)
  { name: "Adebayo Dorcas", id: "J3A001", class: "JSS3 A", role: "-" },
  { name: "Adebayo favour", id: "J3A002", class: "JSS3 A", role: "-" },
  { name: "Garba albarka", id: "J3A003", class: "JSS3 A", role: "-" },
  { name: "Abdul Rasheed rodiat", id: "J3A004", class: "JSS3 A", role: "-" },
  { name: "Akinbiyi Glory", id: "J3A005", class: "JSS3 A", role: "-" },
  { name: "Folorunsho precious", id: "J3A006", class: "JSS3 A", role: "-" },
  { name: "Ogunlana Abdullahi", id: "J3A007", class: "JSS3 A", role: "-" },
  { name: "Adeniyi darasimi", id: "J3A008", class: "JSS3 A", role: "-" },
  { name: "Emmanuel ayowole", id: "J3A009", class: "JSS3 A", role: "-" },
  { name: "Ibhadore Godswill", id: "J3A010", class: "JSS3 A", role: "-" },
  { name: "Aransiola", id: "J3A011", class: "JSS3 A", role: "-" },
  { name: "Yusuff Abdul Sattar", id: "J3A012", class: "JSS3 A", role: "-" },
  { name: "Owoyele Ramadan", id: "J3A013", class: "JSS3 A", role: "-" },
  { name: "Akanji favour", id: "J3A014", class: "JSS3 A", role: "-" },
  { name: "Wisdom Donald", id: "J3A015", class: "JSS3 A", role: "-" },
  { name: "Salawudeen fawas", id: "J3A016", class: "JSS3 A", role: "-" },
  { name: "Afolayan Joshua", id: "J3A017", class: "JSS3 A", role: "-" },
  { name: "Balogun jomiloju", id: "J3A018", class: "JSS3 A", role: "-" },
  { name: "Okwuabudike Victoria", id: "J3A019", class: "JSS3 A", role: "-" },
  { name: "Oluborode true Vine", id: "J3A020", class: "JSS3 A", role: "-" },
  { name: "Emmanuel Maxwell", id: "J3A021", class: "JSS3 A", role: "-" },
  { name: "Nathaniel David", id: "J3A022", class: "JSS3 A", role: "-" },
  { name: "Yusuf Taiwo", id: "J3A023", class: "JSS3 A", role: "-" },
  { name: "Irinyemi jomiloju praise", id: "J3A024", class: "JSS3 A", role: "-" },
  { name: "Emmanuel Priscilla", id: "J3A025", class: "JSS3 A", role: "-" },
  { name: "Sunny blessing", id: "J3A026", class: "JSS3 A", role: "-" },
  { name: "Fatuki oluwanifemi", id: "J3A027", class: "JSS3 A", role: "-" },
  { name: "Oyewole Israel", id: "J3A028", class: "JSS3 A", role: "-" },
  { name: "Kolade idera", id: "J3A029", class: "JSS3 A", role: "-" },
  { name: "Oseni abdulsamod", id: "J3A030", class: "JSS3 A", role: "-" },
  { name: "Nelson Sonia C.C", id: "J3A031", class: "JSS3 A", role: "-" },
  { name: "Nyakos nurudeen", id: "J3A032", class: "JSS3 A", role: "-" },
  { name: "Olatunji al-meen", id: "J3A033", class: "JSS3 A", role: "-" },
  { name: "Olowu fausiyat", id: "J3A034", class: "JSS3 A", role: "-" },
  { name: "Amusat khalilulahi. O", id: "J3A035", class: "JSS3 A", role: "-" },
  { name: "Nanmwa victor", id: "J3A036", class: "JSS3 A", role: "-" },
  { name: "Waheed Aduragbemi", id: "J3A037", class: "JSS3 A", role: "-" },
  
  // JSS3 B (30 students - from your provided list)
  { name: "Adebisi Yusuf", id: "J3B001", class: "JSS3 B", role: "-" },
  { name: "Soyode emmanuella", id: "J3B002", class: "JSS3 B", role: "-" },
  { name: "Faluyi Israel", id: "J3B003", class: "JSS3 B", role: "-" },
  { name: "Uduakhomo peace", id: "J3B004", class: "JSS3 B", role: "-" },
  { name: "Balogun tobiloba", id: "J3B005", class: "JSS3 B", role: "-" },
  { name: "Enabulele Israel", id: "J3B006", class: "JSS3 B", role: "-" },
  { name: "Opatimeyin David", id: "J3B007", class: "JSS3 B", role: "-" },
  { name: "Medua Angel", id: "J3B008", class: "JSS3 B", role: "-" },
  { name: "Gabriel peace", id: "J3B009", class: "JSS3 B", role: "-" },
  { name: "Agbo favour", id: "J3B010", class: "JSS3 B", role: "-" },
  { name: "Lawal Esther", id: "J3B011", class: "JSS3 B", role: "-" },
  { name: "Akinfe christianah", id: "J3B012", class: "JSS3 B", role: "-" },
  { name: "Ayoade Doris", id: "J3B013", class: "JSS3 B", role: "-" },
  { name: "Ambrose emmanuella", id: "J3B014", class: "JSS3 B", role: "-" },
  { name: "Adewunmi oluwademilade", id: "J3B015", class: "JSS3 B", role: "-" },
  { name: "Olasunkanmi ayobami", id: "J3B016", class: "JSS3 B", role: "-" },
  { name: "Samson loveth", id: "J3B017", class: "JSS3 B", role: "-" },
  { name: "Oyeniyi David", id: "J3B018", class: "JSS3 B", role: "-" },
  { name: "Folorunsho Alexander", id: "J3B019", class: "JSS3 B", role: "-" },
  { name: "Olukotun feranmi", id: "J3B020", class: "JSS3 B", role: "-" },
  { name: "Adebisi aishat", id: "J3B021", class: "JSS3 B", role: "-" },
  { name: "Samuel Zainab", id: "J3B022", class: "JSS3 B", role: "-" },
  { name: "Nyakos naimat", id: "J3B023", class: "JSS3 B", role: "-" },
  { name: "Olajesu Kayode", id: "J3B024", class: "JSS3 B", role: "-" },
  { name: "Rotimi Eniola", id: "J3B025", class: "JSS3 B", role: "-" },
  { name: "Onafowokan ridwan", id: "J3B026", class: "JSS3 B", role: "-" },
  { name: "Adeniyi korede", id: "J3B027", class: "JSS3 B", role: "-" },
  { name: "Abdul Razak somod", id: "J3B028", class: "JSS3 B", role: "-" },
  { name: "Adebisi ayomide", id: "J3B029", class: "JSS3 B", role: "-" },
  { name: "Ariyo moses", id: "J3B030", class: "JSS3 B", role: "-" },
  { name: "Popoola Aduragbemi", id: "J3B031", class: "JSS3 B", role: "-" }
];

let filteredStudents = [...allStudents];
let currentSortColumn = null;
let sortDirection = 1;

// Initialize the table
function initializeTable() {
  renderTable();
  updateStats();
  setupSearch();
  setupFilterButtons();
}

// Render table with student data
function renderTable() {
  const tableBody = document.getElementById('tableBody');
  tableBody.innerHTML = '';
  
  filteredStudents.forEach(student => {
    const row = document.createElement('tr');
    
    const badgeClass = getBadgeClass(student.class);
    const roleClass = student.role !== '-' ? 'archive-role leadership' : 'archive-role';
    
    row.innerHTML = `
      <td>
        <div style="font-weight: 500;">${student.name}</div>
      </td>
      <td>
        <div style="font-family: 'SF Mono', monospace; font-size: 15px; color: var(--ios-label-tertiary);">
          ${student.id}
        </div>
      </td>
      <td>
        <span class="archive-badge ${badgeClass}">${student.class}</span>
      </td>
      <td>
        <span class="${roleClass}">${student.role}</span>
      </td>
    `;
    
    tableBody.appendChild(row);
  });
}

// Get badge class based on student class
function getBadgeClass(className) {
  switch(className) {
    case 'SS3 Science': return 'badge-science';
    case 'SS3 Humanities & Business': return 'badge-humanities';
    case 'JSS3 A': return 'badge-jss3a';
    case 'JSS3 B': return 'badge-jss3b';
    default: return '';
  }
}

// Update statistics
function updateStats() {
  const total = allStudents.length;
  const ss3Count = allStudents.filter(s => s.class.includes('SS3')).length;
  const jss3Count = allStudents.filter(s => s.class.includes('JSS3')).length;
  const leadershipCount = allStudents.filter(s => s.role !== '-').length;
  
  document.getElementById('totalStudents').textContent = total;
  document.getElementById('ss3Count').textContent = ss3Count;
  document.getElementById('jss3Count').textContent = jss3Count;
  document.getElementById('leadershipCount').textContent = leadershipCount;
}

// Setup search functionality
function setupSearch() {
  const searchInput = document.getElementById('searchInput');
  searchInput.addEventListener('input', function() {
    const searchTerm = this.value.toLowerCase();
    
    filteredStudents = allStudents.filter(student => 
      student.name.toLowerCase().includes(searchTerm) ||
      student.id.toLowerCase().includes(searchTerm) ||
      student.class.toLowerCase().includes(searchTerm)
    );
    
    renderTable();
  });
}

// Setup filter buttons
function setupFilterButtons() {
  const buttons = document.querySelectorAll('.archive-filter-btn');
  buttons.forEach(button => {
    button.addEventListener('click', function() {
      buttons.forEach(btn => btn.classList.remove('active'));
      this.classList.add('active');
    });
  });
}

// Filter by class
function filterClass(className) {
  const buttons = document.querySelectorAll('.archive-filter-btn');
  buttons.forEach(btn => btn.classList.remove('active'));
  event.target.classList.add('active');
  
  if (className === 'all') {
    filteredStudents = [...allStudents];
  } else {
    filteredStudents = allStudents.filter(student => student.class === className);
  }
  
  renderTable();
}

// Sort table
function sortTable(columnIndex) {
  const headers = document.querySelectorAll('.archive-table th');
  headers.forEach(header => header.classList.remove('sorted'));
  
  if (currentSortColumn === columnIndex) {
    sortDirection = -sortDirection;
  } else {
    currentSortColumn = columnIndex;
    sortDirection = 1;
  }
  
  headers[columnIndex].classList.add('sorted');
  
  filteredStudents.sort((a, b) => {
    let aValue, bValue;
    
    switch(columnIndex) {
      case 0: aValue = a.name; bValue = b.name; break;
      case 1: aValue = a.id; bValue = b.id; break;
      case 2: aValue = a.class; bValue = b.class; break;
      case 3: aValue = a.role; bValue = b.role; break;
      default: return 0;
    }
    
    if (aValue < bValue) return -1 * sortDirection;
    if (aValue > bValue) return 1 * sortDirection;
    return 0;
  });
  
  renderTable();
}

// Export to CSV
function exportToCSV() {
  const headers = ['Name', 'Student ID', 'Class', 'Role'];
  const csvData = [
    headers.join(','),
    ...filteredStudents.map(student => 
      `"${student.name}","${student.id}","${student.class}","${student.role}"`
    )
  ].join('\n');
  
  const blob = new Blob([csvData], { type: 'text/csv;charset=utf-8;' });
  const link = document.createElement('a');
  const url = URL.createObjectURL(blob);
  
  link.setAttribute('href', url);
  link.setAttribute('download', `tendercare_students_${new Date().toISOString().split('T')[0]}.csv`);
  link.style.visibility = 'hidden';
  
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', initializeTable);
</script>
</body>
</html>